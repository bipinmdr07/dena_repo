<div class="row row-offcanvas row-offcanvas-left">
  <!-- sidebar -->
  <div class="col-lg-2 visible-lg">
      
      <%= render 'sidebar' %>

  </div>

  <div class="col-lg-8 col-lg-offset-1 col-md-12">

    <section class="lesson_content">

      <%= render partial: '/cards/widget' %>

      <%= render :file => "app/views/#{@course_link}/lessons/lesson_#{@lesson}" %>
      <br class = "clear">

      <%= render 'lesson_nav_section' %>

      <%= render partial: '/submission_comments/submission_for_lesson', locals: { name: "#{@course_name}", lesson: params[:id]} if @submissions == true %>

      <%= render partial: '/comments/for_lesson', locals: { name: "#{@course_name}", lesson: params[:id]} %>

    </section>

  </div>

</div>

<script type="text/javascript">

// add .active to current lesson
var url = window.location;
// Will only work if string in href matches with location
$('ul.nav a[href="'+ url +'"]').parent().addClass('active');

// Will also work for relative and absolute hrefs
$('ul.nav a').filter(function() {
    return this.href == url
}).parent().addClass('active');

// scroll to current lesson
var ready;
ready = function() {

  var target = document.getElementsByClassName("active");
  target[0].parentNode.scrollTop = target[0].offsetTop; 

  $("#slider").slideReveal({
    trigger: $(".trigger"),
    position: "right",
    width: 350,
    speed: 700,
    top: 70
  });

  // $(document).scroll(function() {
  //     checkOffset();
  // });

  // function checkOffset() {
  //   if($('#slider').offset().top + $('#slider').height() 
  //                                          >= $('.footer').offset().top - 10)
  //       $('#slider').css('position', 'absolute');
  //   if($(document).scrollTop() + window.innerHeight < $('.footer').offset().top)
  //       $('#slider').css('position', 'fixed'); // restore when you scroll up
  // }

};

$(document).ready(ready);
$(document).on('page:load', ready);

</script>